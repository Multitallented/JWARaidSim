
<div class="container {{nation}}">

  <div class="right list-resources faction-bg">
    {{getPoints()}} pts | {{getOptions()}} opts
  </div>

  <div class="nation-select">
    <h3>Select Your Faction</h3>
    <a href="#" class="ru" (click)="selectNation('russian');">
      <img src="/assets/flags/ru.png" alt="Soviet Russia" />
    </a>
    <a href="#" class="de" (click)="selectNation('german');">
      <img src="/assets/flags/de.png" alt="Nazi Germany" />
    </a>
    <a href="#" class="us" (click)="selectNation('american');">
      <img src="/assets/flags/us.png" alt="United States" />
    </a>
    <a href="#" class="ja" (click)="selectNation('japanese');">
      <img src="/assets/flags/ja.png" alt="Imperial Japan" />
    </a>
    <a href="#" class="zh" (click)="selectNation('chinese');">
      <img src="/assets/flags/zh.png" alt="China" />
    </a>
    <a href="#" class="it" (click)="selectNation('italian');">
      <img src="/assets/flags/it.png" alt="Italy" />
    </a>
    <a href="#" class="uk" (click)="selectNation('british');">
      <img src="/assets/flags/uk.png" alt="British Commonwealth" />
    </a>
    <a href="#" class="ina" (click)="selectNation('indian');">
      <img src="/assets/flags/ina.png" alt="Indian National Army" />
    </a>
    <a href="#" class="fr" (click)="selectNation('french');">
      <img src="/assets/flags/fr.png" alt="France" />
    </a>
  </div>

  <div class="clearfix"></div>
  <div class="row" *ngIf="nation">
    <div class="col wdth-33">
      <h3>Options</h3>
      <div *ngFor="let platoonOption of platoonOptions">
        <span class="name">{{platoonOption.name}}</span>
        <a href="#" (click)="addPlatoon(platoonOption)">>></a>
      </div>
    </div>
    <div class="col wdth-33 chosen-platoons">
      <h3>Army</h3>
      <div class="platoon" *ngFor="let platoon of armyList">
        <ng-container *ngIf="armyList.length > 0 || platoon.standard">
          <div class="platoon-info">
            <span class="name">{{platoon.name}} {{platoon.getPoints()}}pts</span>
            <a href="#" class="platoon-accordian right" (click)="platoon.expanded = !platoon.expanded">{{platoon.expanded ? '--' : '+'}}</a>
            <a href="#" class="platoon-edit right" (click)="platoon.editing=!platoon.editing">{{platoon.editing ? 'Save' : 'Edit'}}</a>
          </div>
          <div class="platoon-squads" [ngClass]="{'expanded': platoon.expanded}">
            <div *ngFor="let squad of platoon.squads">
              <div *ngIf="platoon.editing || squad.included">
                <a href="#" (click)="viewSquad(squad, platoon)">{{squad.name}} {{squad.points}}pts</a>
                <a href="#" class="right" *ngIf="!squad.required" (click)="squad.included = !squad.included">{{squad.included ? 'Remove' : 'Add'}}</a>
              </div>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
    <div class="col wdth-33">
      <h3>Unit</h3>
      <div *ngIf="activeSquad">
        <div class="active-squad" [ngClass]="{'front': frontSide}">
          <h2>{{activeSquad.name.split(' ')[0]}}
            <span *ngIf="activeSquad.name.indexOf(' ') !== -1">{{activeSquad.name.substring(activeSquad.name.indexOf(' '), activeSquad.name.length)}}</span></h2>
          <img class="card-icon" src="{{getCardIcon(activeSquad)}}" alt="Card Icon" />
          <div class="card-container">
            <ng-container *ngIf="frontSide">
              <div class="main-image">
                <img src="{{activeSquad.data.img}}" alt="{{activeSquad.name}}" />
              </div>
              <div class="points-bar">
                <span *ngIf="activeSquad.data.hq" class="hq">HQ</span>
                <span class="points">{{activeSquad.points}}pts </span>
                <span *ngIf="activeSquad.data.options" class="options">{{activeSquad.data.options}}opts</span>
              </div>
              <div class="lore-container">
                <div *ngFor="let variant of activeSquad.data.variants" class="variant" (click)="toggleVariant(variant)">
                  <img class="unlock-icon" *ngIf="variant.selected" src="assets/common/unlock.png" alt="Unlocked" />
                  <img class="lock-icon" *ngIf="!variant.selected" src="assets/common/lock.png" alt="Unlocked" />
                  +{{variant.points}}pts {{replaceIcons(variant.name)}}
                </div>
                <div class="hr" *ngIf="activeSquad.data.lore"></div>
                <p *ngIf="activeSquad.data.lore">
                  {{activeSquad.data.lore}}
                </p>
                <p class="right" *ngIf="activeSquad.data.quote">
                  {{activeSquad.data.quote}}
                </p>
              </div>
            </ng-container>
            <ng-container *ngIf="!frontSide">

            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
